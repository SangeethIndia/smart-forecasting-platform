<div class="dashboard-container">
  <h1 class="dashboard-title">MISHAP PREDICTIONS</h1>
  <br/>
  <!-- Second-level trend selection -->
  <div class="view-toggle" style="margin-top:12px; display:flex; gap:12px; align-items:center;">
    <label class="toggle-pill" [class.active]="trendMode === 'year'">
      <input type="radio" name="trendMode" [(ngModel)]="trendMode" value="year" hidden />
      Mishap Trend by Year
    </label>
    <label class="toggle-pill" [class.active]="trendMode === 'quarter'">
      <input type="radio" name="trendMode" [(ngModel)]="trendMode" value="quarter" hidden />
      Mishap Volume by Quarters (Quarters of the Year / Seasonal)
    </label>
    <label class="toggle-pill" [class.active]="trendMode === 'classification'">
      <input type="radio" name="trendMode" [(ngModel)]="trendMode" value="classification" hidden />
      Mishap Trend - Volume / Classification
    </label>
  </div>

  <!-- Apply button to construct UI-driven payload and trigger prediction -->
  <div style="margin-top:12px;">
    <button class="primary" (click)="applyFilters()" 
      style="background:#0d6efd;color:#fff;padding:12px 22px;border-radius:8px;border:none;font-weight:700;box-shadow:0 4px 12px rgba(13,110,253,0.3);font-size:16px;">
      Apply
    </button>
  </div>

  <!-- Chart-only results -->
  <ng-container *ngIf="facade.result$ | async as result">
    <div class="results">
      <div class="chart-panel">
  <app-ml-chart [data]="result.predictions" [mode]="trendMode"></app-ml-chart>
      </div>
    </div>
  </ng-container>
</div>
